<!DOCTYPE html>

<head>
  <title>PHYSCI 70: Intro to Digital Fabrication </title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <link href="../styling.css" rel="stylesheet">
  <link href="../hover_pictures.css" rel="stylesheet">
  <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
</head>
<body>

<!-- Heading -->
<div class="header_main">
	<header>Week 8: Radio Communication
	</header>
</div>

<!-- Nav -->
<div>
	<nav><a href='../index.html'>Home</a></nav>
</div>

<div class="row">
  <div class="col-sm-1">
  </div>
  <div class="col-sm-6">
            <h3 class="center"> Basic Communication: </h3>
            <p> In lab I got confortable sending data thorugh ESPNow using the examples for sending a byte and other data. Since my metro stopped working and I already set up the ESP-32 CAM and the Huzzah in a previous week, I was comfortable with uploading to the CAM and all the little nuances that came along with it, such as; grounding the IO0 pin, being on the right baud rate in the serial monitor, hitting the reset pin as you are uploading code, removing the IO0 pin from ground, and hitting the reset again after the IO0 pin was ungrounded. Being familiar with this definitely helped me move foward with my project this week. Anyways, the pictures of the serial monitor receiving data are shown. For some reason I did not remember to show the servo control using a potentiometer, but since my project used this feature I comes back up.
            </p>
        </div>
    <div class="col-sm-4">
      <div id="myCarousel" class="carousel slide" data-ride="carousel">
          <!-- Indicators -->
          <ol class="carousel-indicators">
            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
            <li data-target="#myCarousel" data-slide-to="1"></li>
          </ol>

          <!-- Wrapper for slides -->
          <div class="carousel-inner">
            <div class="item active" class="center">
              <img src="./sending_byte.jpg" alt="Receiving a byte">
              <div class="carousel-caption">
                <h2>Receiving a byte</h2>
                <p></p>
              </div>
            </div>

            <div class="item" class="center">
              <img src="./sending_more_than_byte.jpg" alt="Receiving more than a byte">
              <div class="carousel-caption">
                <h2>Receiving more than a byte</h2>
                <p></p>
              </div>
            </div>

          <!-- Left and right controls -->
          <a class="left carousel-control" href="#myCarousel" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="right carousel-control" href="#myCarousel" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
    </div>
  </div>
    <div class="col-sm-1">
  </div>
</div>

</br>

<div class="row">
  <div class="col-sm-1">
  </div>
  <div class="col-sm-6">
            <h3 class="center"> The Idea: </h3>
            <p> Since the project was very open ended and we were working with remote communication, I thought it would be interesting if I created a remote controlled car. To do I planned to used potentiometers with the Huzzah to control the speed of two N20 motors, and then I figured I could add other features such as camera on the car using the built in camera feature of the ESP-32 CAM. I defiinitely hit some rough patches while wookring but in the end I was able to create something that resembled a functional RC car. 
            </p>
            <h3 class="center"> The N20's: </h3>
            <p> Getting the N20's to work probably took the most amount of time. At first I completely forget and neglected the motor drivers and I was trying to control them using a transistor. The use of the transistor allowed me to use an external battery pack to power the motors. I'm sure this would of worked, but I was was struggling to get the motors to move with the Ledc PWM functionality. I imagine that it might of been a problem with the wiring of the transitor. At this point since I was struggling and was trying to use ESP Now at the same time I decided to just try to get the motors to run only using the CAM. After ditching ESP NOW, and finding the motor driver, along with <a href="https://www.arduino.cc/reference/en/libraries/esp32-analogwrite/">this library</a> (which allows for analogWrite functionality thorugh functions built around PWM) getting the motors to run became fairly simple. I think my biggest problem was not using the drivers sooner I could of figured out the PWM since I used it last week.
            </p>
            <p> Since I had my motors working I got to work on the frame of the car. I found that the box for the servo motors was conveniently exactly the size of the external 4 AA batter pack and (not as conveniently) just a bit long for the 3D motor holder within the kit. With some quick work using an box cutter I was able to get 'wheel wells' for the tires and was able to glue the 3D printed motor holder on. I also made a little hole to connect the wires to the driver. For the front wheel, I used a coat hanger and bent it and pushed it into the cardboard. The battery pack conveniently helped hold the coat hanger in place. Also, I found out that the best place for the car to continue to uplaod code to my CAM was "in the shop" (which was just the car propped up by the apple pencil holder the college sent me on loan). 
            </p>
            <p> Below are two videos, one of which shows when I first got ESPNow to work with the motor, and then another that shows after I put my car together.
            </p>
        </div>
    <div class="col-sm-4">
      <div id="myCarousel_1" class="carousel slide" data-ride="carousel">
          <!-- Indicators -->
          <ol class="carousel-indicators">
            <li data-target="#myCarousel_1" data-slide-to="0" class="active"></li>
            <li data-target="#myCarousel_1" data-slide-to="1"></li>
            <li data-target="#myCarousel_1" data-slide-to="2"></li>
          </ol>

          <!-- Wrapper for slides -->
          <div class="carousel-inner">
            <div class="item active">
              <img src="./front_wheel.jpg" alt="Front Wheel - Coat Hanger">
              <div class="carousel-caption">
                <h2>The front wheel</h2>
                <p></p>
              </div>
            </div>

            <div class="item">
              <img src="./wheels_on_car.jpg" alt="N20's on car">
              <div class="carousel-caption">
                <h2>Both N20's on the Car</h2>
                <p></p>
              </div>
            </div>

            <div class="item">
              <img src="./car_in_shop.jpg" alt="Car 'in the shop'">
              <div class="carousel-caption">
                <h2>The Car "In the Shop"</h2>
                <p></p>
              </div>
            </div>

          <!-- Left and right controls -->
          <a class="left carousel-control" href="#myCarousel_1" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="right carousel-control" href="#myCarousel_1" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
    </div>
  </div>
    <div class="col-sm-1">
  </div>
</div>

</br>

<div class="row">
  <div class="col-sm-1">
  </div>
  <div class ="col-sm-5">
       <figure> <iframe width="100%" height="350" src="https://www.youtube.com/embed/KZMuAjQGt50" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen alt="spinning N20 with ESPNow"></iframe>
      </figure>
  </div>
  <div class ="col-sm-5">
       <figure> <iframe width="100%" height="350" src="https://www.youtube.com/embed/WQW2XTNLC9U" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen alt="test drive"></iframe>
      </figure>
  </div>
  <div class="col-sm-1">
  </div>
</div>

</br>

<div class="row">
  <div class="col-sm-1">
  </div>
      <div class="col-sm-4">
      <div id="myCarousel_2" class="carousel slide" data-ride="carousel">
          <!-- Indicators -->
          <ol class="carousel-indicators">
            <li data-target="#myCarousel_2" data-slide-to="0" class="active"></li>
            <li data-target="#myCarousel_2" data-slide-to="1"></li>
            <li data-target="#myCarousel_2" data-slide-to="2"></li>
          </ol>

          <!-- Wrapper for slides -->
          <div class="carousel-inner">
            <div class="item active">
              <img src="./tinkercad_huzzah.jpg" alt="Wiring Huzzah">
              <div class="carousel-caption">
                <h2>Wiring Huzzah</h2>
                <p></p>
              </div>
            </div>

            <div class="item">
              <img src="./tinkercad_cam.jpg" alt="Wiring ESP-32 CAM">
              <div class="carousel-caption">
                <h2>Wiring ESP-32 CAM</h2>
                <p></p>
              </div>
            </div>

            <div class="item">
              <img src="./huzzah_wiring.jpg" alt="Wiring Huzzah #2">
              <div class="carousel-caption">
                <h2>Wiring Huzzah #2</h2>
                <p></p>
              </div>
            </div>

            <div class="item">
              <img src="./cam_wiring.jpg" alt="Wiring ESP-32 CAM #2">
              <div class="carousel-caption">
                <h2>Wiring ESP-32 CAM #2</h2>
                <p></p>
              </div>
            </div>

            <div class="item">
              <img src="./cam_board_no_pins.jpg" alt="Wiring ESP-32 CAM #3">
              <div class="carousel-caption">
                <h2>Wiring ESP-32 CAM #3</h2>
                <p></p>
              </div>
            </div>

          <div class="item">
              <img src="./inside_of_car_batteries.jpg" alt="Batteries Car">
              <div class="carousel-caption">
                <h2>Car Batteries</h2>
                <p></p>
              </div>
            </div>

            <div class="item">
              <img src="./car_gutted.jpg" alt="Car Gutted">
              <div class="carousel-caption">
                <h2>The Car "Gutted"</h2>
                <p></p>
              </div>
            </div>

          <!-- Left and right controls -->
          <a class="left carousel-control" href="#myCarousel_2" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="right carousel-control" href="#myCarousel_2" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
      </div>
    </div>
  <div class="col-sm-6">
            <h3 class="center"> The Add-ons: </h3> 
            <p> At this point it was getting late but I felt like I didn't have enough going on with my car. So I quickly hooked up the peizo that was controlled by a button on the huzzah, which gave me a horn on my car. After this I called it good for the night.
            </p>
            <p> In the morning I knew I didn't have time to add more to my car and get my write up done in time for class, but I still wanted more. So, I made a decision I do not regret and I spent a couple hours hooking up the NeoPixel LED strip to the car. This was my first time using the LED strip and I was unsure how complex the NeoPixel was. To start I visited <a href="http://amymzhou.com/ps70///week7/">Amy Zhou's documentation</a> since I remembered she just used a the LED strip. I found it was a good place to start and similar to her I went to the built in examples to get started. At this point I have learned that when starting with something new, don't first control it over ESPNow, so just using the CAM I set up the NeoPixel (after some debugging). I think after seeing the built in starter example the NeoPixel is now my new favorite output device since I am a big sucker for colorful things. Anyways, I was able to get it running and to combine the code I just took the "rainbow" function from the starter exmaple and edited it so it didn't have a delay. I then hooked ESPNow up to it with the same circuit I used for the buzzer and I had a light strip on my car! Even though the NeoPixel called for 5 volts, I found that it worked with 3.3V from the CAM just as well.
            </p>
            <p> Admmittedly, I was really rushing along at this point and my photo documentation is not the best, so the pictures shown the schematics for my wiring, the wiring in real life (it was not neat, and I am dissapointed I still had a few more pins on the ESP-32 CAM I didn't get to use), and the car once it was all put together.
            </p>
            <p> Below you can find the video of the controls and the car itself (note: I realized some aren't working the way the should, but the gist is there) and the car driving. Sadly it didn't turn like I hoped it would when I turned one wheel off. If I had more times I would of looked into that.
            </p>
        </div>
    <div class="col-sm-1">
  </div>
</div>

</br>

<div>
  <div class="col-sm-1">
  </div>
  <div class ="col-sm-5">
       <figure> <iframe width="100%" height="350" src="https://www.youtube.com/embed/evxJ-0QpD0Q" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen alt="Car Controls"></iframe>
      </figure>
  </div>
  <div class ="col-sm-5">
       <figure> <iframe width="100%" height="350" src="https://www.youtube.com/embed/lCxQeYNdWrM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen alt="Driving Car"></iframe>
      </figure>
  </div>
  <div class="col-sm-1">
  </div>
</div>

</br>

<div>
  <div class="col-sm-1">
  </div>
  <div class ="col-sm-10">
    <h3 class = "center"> Download Arduino Files: </h3>
    <p class="center"> Additionally here are the downloadable files for my code:
    </p>
    <ol class="center">
      <li> <a href="./motor_sender/motor_sender.ino" download="sender.ino"> Sending Board</a> </li>
      <li> <a href="./motor_reciever/motor_reciever.ino" download="receiver.ino"> Receiving Board</a> </li>
    </ol>
  </div>
  <div class="col-sm-1">
  </div>
</div>

</body>